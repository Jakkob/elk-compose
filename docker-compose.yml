elasticsearch:
  image: docker.elastic.co/elasticsearch/elasticsearch:6.4.1
  container_name: elasticsearch
  environment:
    - cluster.name=docker-cluster
    - bootstrap.memory_lock=true
    - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
  ulimits:
    memlock:
      soft: -1
      hard: -1
  volumes:
    - esdata:/usr/share/elasticsearch/data
  ports:
    - "9200:9200"
    - "9300:9300"

kibana:
  image: docker.elastic.co/kibana/kibana:6.4.1
  container_name: kibana
  volumes:
    - ./kibana/config/:/opt/kibana/config/
  ports:
    - "5601:5601"
  links:
    - elasticsearch

logstash:
  image: docker.elastic.co/logstash/logstash:6.4.1
  container_name: logstash
  volumes:
    - ./logstash/config:/usr/share/logstash/config/
  ports:
    - "5000:5000"
    - "6514:6514"
    - "2055:2055"
  links:
    - elasticsearch

volumes:
  esdata:
    driver: local